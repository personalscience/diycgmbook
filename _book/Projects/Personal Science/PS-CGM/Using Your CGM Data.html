<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="How to do your own personal science experiments with continuous glucose monitoring.">

<title>DIY CGM - 6&nbsp; Using Your CGM Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../Projects/Personal Science/PS-CGM/Advanced Topics.html" rel="next">
<link href="../../../Projects/Personal Science/PS-CGM/Diet and food-tracking.html" rel="prev">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../css/theme.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../Projects/Personal Science/PS-CGM/Diet and food-tracking.html">Techniques</a></li><li class="breadcrumb-item"><a href="../../../Projects/Personal Science/PS-CGM/Using Your CGM Data.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Using Your CGM Data</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../../">DIY CGM</a> 
        <div class="sidebar-tools-main">
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../../../diycgm.epub">
              <i class="bi bi-bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../../../diycgm.docx">
              <i class="bi bi-bi-file-word pe-1"></i>
            Download Docx
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">General Overview</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Prerequisites</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Projects/Personal Science/PS-CGM/Introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Projects/Personal Science/PS-CGM/How to get your CGM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">How to get your CGM</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Projects/Personal Science/PS-CGM/News and Experiences.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">News and Experiences</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Techniques</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Projects/Personal Science/PS-CGM/Diet and food-tracking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Diet and food-tracking</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Projects/Personal Science/PS-CGM/Using Your CGM Data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Using Your CGM Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../Projects/Personal Science/PS-CGM/Advanced Topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Advanced Topics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../References.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">References</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#use-the-personal-science-app" id="toc-use-the-personal-science-app" class="nav-link active" data-scroll-target="#use-the-personal-science-app"><span class="header-section-number">6.1</span> Use the Personal Science App</a></li>
  <li><a href="#abbott-labs-official" id="toc-abbott-labs-official" class="nav-link" data-scroll-target="#abbott-labs-official"><span class="header-section-number">6.2</span> Abbott Labs Official</a></li>
  <li><a href="#international-versions" id="toc-international-versions" class="nav-link" data-scroll-target="#international-versions"><span class="header-section-number">6.3</span> International versions</a></li>
  <li><a href="#third-party" id="toc-third-party" class="nav-link" data-scroll-target="#third-party"><span class="header-section-number">6.4</span> Third Party</a></li>
  <li><a href="#open-source-software" id="toc-open-source-software" class="nav-link" data-scroll-target="#open-source-software"><span class="header-section-number">7</span> Open Source Software</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Using Your CGM Data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Websites and apps that help you track glucose numbers.</p>
<section id="use-the-personal-science-app" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="use-the-personal-science-app"><span class="header-section-number">6.1</span> Use the Personal Science App</h2>
<p>The best way to analyze your CGM data is with the CGM app from Personal Science (makers of this web site). You can upload your data and study it for free using the open source software <a href="https://github.com/personalscience/taster">here</a>. Uses Docker. Requires a little setup, but it will let you upload a CSV file and generate plots like this:</p>
<p><img src="../../../assets/images/images/glucose_Levels_After_Eating_Rice.jpg" class="img-fluid"></p>
</section>
<section id="abbott-labs-official" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="abbott-labs-official"><span class="header-section-number">6.2</span> Abbott Labs Official</h2>
<p>The most important software for Freestyle Libre downloading is the officially-supported one here:</p>
<p><a href="https://provider.myfreestyle.com/freestyle-libre-resources.html" class="uri">https://provider.myfreestyle.com/freestyle-libre-resources.html</a></p>
<p>Create an account on Libreview and then you can download your data as a CSV file here:</p>
<p><a href="https://www.libreview.com/meter" class="uri">https://www.libreview.com/meter</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../../assets/images/images/freestyle-download.jpg" title="image_tooltip" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Libreview main page</figcaption>
</figure>
</div>
<p>Then click here: <a href="https://www.libreview.com/glucosereports" class="uri">https://www.libreview.com/glucosereports</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../../assets/images/images/freestyle-download-click.jpg" title="image_tooltip" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Click to download</figcaption>
</figure>
</div>
<p>If you have the Abbott custom reader device, you can also download a Mac or Windows version of Freestyle Libre personal CGM</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../../assets/images/images/freestyle-software.png" title="image_tooltip" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Freestyle Libre Software</figcaption>
</figure>
</div>
</section>
<section id="international-versions" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="international-versions"><span class="header-section-number">6.3</span> International versions</h2>
<p>Freestyle Libre devices sold in other countries will generally work everywhere if you use the app downloaded specifically for that country.</p>
<p>This [table by <a href="https://www.facebook.com/photo.php?fbid=1835069433269419&amp;set=gm.751003141928341&amp;type=3&amp;theater&amp;ifg=1">Chuck Kub</a>] is a little old, but gives a sense of which models are available in which countries.</p>
<p><strong>China:</strong> buy a reader plus 3 14-day sensor packs <a href="https://item.jd.com/32498232197.html">through Taobao</a> for about 1800 RMB (USD$270)</p>
</section>
<section id="third-party" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="third-party"><span class="header-section-number">6.4</span> Third Party</h2>
<p>Many organizations now offer ways to upload and use your Freestyle (or other CGM) data.</p>
<table class="table">
<tbody>
<tr class="odd">
<td><p><strong>Nightscout</strong></p>
<p>"an open source, DIY project that allows real time access to a CGM data via personal website, smartwatch viewers, or apps and widgets available for smartphones"</p>
<p>See their app <a href="https://spike-app.com/" class="uri">https://spike-app.com/</a></p></td>
<td></td>
<td><img src="../../../assets/images/images/nightscout-logo.png" title="image_tooltip" class="img-fluid" alt="alt_text"> <a href="http://www.nightscout.info/" class="uri">http://www.nightscout.info/</a></td>
</tr>
<tr class="even">
<td><p><strong>Diasend</strong></p>
<p>(formerly called<a href="https://www-int.glooko.com/">Glooko</a>) tries to let you upload data from anywhere</p></td>
<td></td>
<td><img src="../../../assets/images/images/diasend-logo.png" title="image_tooltip" class="img-fluid" alt="alt_text"> <a href="https://diasend.com/us" class="uri">https://diasend.com/us</a></td>
</tr>
<tr class="odd">
<td><p><strong>Tidepool</strong> <a href="https://app.tidepool.org/patients" class="uri">https://app.tidepool.org/patients</a></p>
<p>Open-source non-profit place to upload glucose data</p></td>
<td></td>
<td><img src="../../../assets/images/images/tidepool-logo.png" title="image_tooltip" class="img-fluid" alt="alt_text">
<p><a href="https://tidepool.org" class="uri">https://tidepool.org</a></p></td>
</tr>
<tr class="even">
<td><strong>Diabetes:M</strong></td>
<td></td>
<td><img src="../../../assets/images/images/miaomiao-logo.png" title="image_tooltip" class="img-fluid" alt="alt_text">
<p>https://diabetes-m.com/</p></td>
</tr>
<tr class="odd">
<td><strong>Glimp</strong> : popular Android app</td>
<td></td>
<td><img src="../../../assets/images/images/glimp-logo.png" title="image_tooltip" class="img-fluid" alt="alt_text">
<p><a href="https://play.google.com/store/apps/details?id=it.ct.glicemia" class="uri">https://play.google.com/store/apps/details?id=it.ct.glicemia</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="open-source-software" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Open Source Software</h1>
<ul>
<li><p><a href="https://github.com/personalscience/cgmr">cgmr</a> is an open-source R package that lets you read and process CGM data from Abbott Freestyle Libre. Includes functions to calculate iAUC and do side-by-side analyses comparing different food types over time.</p></li>
<li><p><strong>Nightscout xDrip+</strong>: <a href="https://github.com/JoernL/xDrip-plus" class="uri">https://github.com/JoernL/xDrip-plus</a></p>
<ul>
<li>supports wireless connections to G4, G5, G6, Medtrum A6, Libre via NFC and Bluetooth, 630G, 640G, 670G pumps and Eversense CGM via companion apps. Bluetooth Glucose Meters such as the Contour Next One, AccuChek Guide, Verio Flex &amp; Diamond Mini as well as devices like the Pendiq 2.0 Insulin Pen</li>
<li>44 contributors, very active since Nov 2014 (latest checkin Dec 2018)</li>
<li></li>
</ul></li>
<li><p><strong>OpenLibreReader</strong> iOS: <a href="https://github.com/blueToolz/openLibreReader-iOS-" class="uri">https://github.com/blueToolz/openLibreReader-iOS-</a></p>
<ul>
<li>a project to connect the various Libre Transmitters to the iPhone.</li>
<li><a href="https://unendlichkeit.net/wordpress/openlibrereader-and-status/?lang=en">Blog post</a> (Jan 2018) summarizing goals and status.</li>
<li>latest commit Apr 2018; Started in Nov 2017 by 2 Germans</li>
</ul></li>
<li><p><a href="https://github.com/UPetersen/LibreMonitor" class="uri">https://github.com/UPetersen/LibreMonitor</a> iOS NFC reader, includes hardware instructions</p>
<ul>
<li>last active: Nov 2018. Started in 2016 by 3 guys from Germany</li>
</ul></li>
<li><p><strong>nahog / freestyle-libre-parser-viewer:</strong> <a href="https://github.com/nahog/freestyle-libre-parser-viewer">https://github.com/nahog/freestyle-libre-parser-v tiewer</a></p>
<ul>
<li>A parser library and viewer for CSV generated by the Abbott Freestyle Libre flash glucose meter.</li>
<li>From 2016, last commit June 2018; One guy from Ireland</li>
</ul></li>
<li><p><a href="https://cran.r-project.org/web/packages/cgmanalysis/index.html">cgmnalysis</a>: R Package on CRAN and <a href="https://github.com/childhealthbiostatscore/R-Packages">Github</a> cleans up data from multiple CGM devices</p>
<ul>
<li>Last update October 2019</li>
</ul></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../../Projects/Personal Science/PS-CGM/Diet and food-tracking.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Diet and food-tracking</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../../Projects/Personal Science/PS-CGM/Advanced Topics.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Advanced Topics</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Personal Science <a href="https://personalscience.com" class="uri">https://personalscience.com</a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/personalscience/diycgmbook">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/sprague">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>